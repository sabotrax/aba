DIM P1%(26)
'HP,MN,ATK
P1%(0)=8:P1%(1)=7:P1%(2)=1
'DEF,SP,SPC,SPV
P1%(3)=1:P1%(6)=1:P1%(7)=4.5:P1%(8)=2
'ART,AR1
'P1%(10)=1:P1%(11)=1 'STEADY SHIELD
P1%(10)=2 'ENDLESS SANDBAG
'IHP,IMN
P1%(25)=8:P1%(26)=7
'P1%(15)=1:P1%(16)=0.5
DIM N1%(22)
'N1 8,4,2,2
N1%(0)=8:N1%(1)=4:N1%(2)=2
N1%(3)=2
DIM DP$(4)

'ROLL DICE
D1=0
D2=0
PROC RD
  D1=RAND(12)+1
  D2=RAND(12)+1
ENDPROC

'ATTACK
PROC ATCK
  N1%(0)=N1%(0)-P1%(2)
ENDPROC

'DEFEND
PROC DFND
  HD%=N1%(2) 'W/O ARTIFACTS
  FOR A=10 TO 20 STEP 5
    IF P1%(A)>0
      EXEC ADA A
    ENDIF
  NEXT A
  IF HD%<0
    HD%=0
  ENDIF
  P1%(0)=P1%(0)-HD%
ENDPROC

'SPECIAL
PROC SPC
  P1%(1)=P1%(1)-P1%(7) 'SUBTRACT MN
  IF P1%(6)=1
    DP$(1)="HEAL"
    P1%(0)=P1%(0)+P1%(8)
    IF P1%(0)>P1%(25)
      P1%(0)=P1%(25)
    ENDIF
  ENDIF
ENDPROC

'APPLY DEF ARTIFACTS
PROC ADA ART
  IF P1%(ART)=1 'STEADY SHIELD
    DP$(2)="SHIELD!"
    HD%=HD%-P1%(ART+1)
  ELIF P1%(ART)=2 'ENDLESS SANDBAG
    C=RAND(6)+1
    IF C>4
      DP$(2)="THROW SAND!"
      HD%=0
    ENDIF
  ENDIF
ENDPROC

'UPDATE DISPLAY
PROC UPDP
  POS. 16,9
  PRINT"               "
  POS. 16,9
  PRINT DP$(0)
  POS. 16,10
  PRINT"               "
  POS. 16,10
  PRINT DP$(1)
  POS. 16,11
  PRINT"                    "
  POS. 16,11
  PRINT DP$(2)
  POS. 9,14
  PRINT"               "
  POS. 9,14
  PRINT P1%(0);",";P1%(1),,N1%(0)
  FOR S=0 TO 3
    DP$(S)=""
  NEXT S
ENDPROC

'DRAW PLAYERS
PROC DRPL
  POS. 9,13
  PRINT"P",,"d"
ENDPROC

'MAIN
REPEAT
  @DRPL
  @RD
  IF D1>(D2+N1%(3))
    DP$(0)="STRIKE"
    @ATCK
    'IF P1%(1)>=P1%(7)
      'EXEC SPC
    'ENDIF
  ELIF D2>(D1+P1%(3))
    DP$(0)="GOT HIT"
    @DFND
  ELSE
    DP$(0)="PARRY"
  ENDIF
  IF P1%(1)>=P1%(7)
    @SPC
  ENDIF
  P1%(1)=P1%(1)+0.5 'REPLENISH MN
  IF P1%(1)>P1%(26)
    P1%(1)=P1%(26)
  ENDIF
  @UPDP
  PAUSE 50
UNTIL P1%(0)<=0 OR N1%(0)<=0
POS. 16,15
IF P1%(0)<=0 AND N1%(0)<=0
  PRINT"STALEMATE!"
ELIF P1%(0)<=0
  PRINT"LOST"
ELSE
  PRINT"WON!"
ENDIF
